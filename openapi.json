{
  "openapi": "3.0.0",
  "paths": {
    "/jira/monitor/fetch": {
      "get": {
        "description": "Consulta o Jira usando o JQL informado (ou o padrão do projeto OMNIJS), filtra, agrupa e retorna resumo das issues.",
        "operationId": "JiraMonitorController_fetchIssues",
        "parameters": [
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "Identificador das credenciais (ex.: \"default\")",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "jql",
            "required": false,
            "in": "query",
            "description": "Consulta JQL completa. Se omitido, usa: project = \"OMNIJS\" ORDER BY created DESC",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Retorna objeto contendo total, lista de issues e contagem por status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProcessedIssuesResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Parâmetro inválido (ex.: JQL malformado)"
          },
          "500": {
            "description": "Erro interno ao processar a requisição"
          }
        },
        "summary": "Buscar e processar issues do Jira com JQL dinâmico",
        "tags": [
          "Jira Monitor"
        ]
      }
    }
  },
  "info": {
    "title": "Jira Monitor API",
    "description": "API para monitorar filas do Jira via autenticacao basica",
    "version": "1.0.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "schemas": {
      "IssueSummaryDto": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string",
            "example": "OMNIJS-123",
            "description": "Chave única da issue no Jira"
          },
          "summary": {
            "type": "string",
            "example": "Implementar fluxo OAuth",
            "description": "Sumário (título) da issue"
          },
          "status": {
            "type": "string",
            "example": "In Progress",
            "description": "Status atual da issue"
          },
          "created": {
            "type": "string",
            "example": "2025-05-20T14:30:00.000Z",
            "description": "Data de criação da issue (formato ISO 8601)"
          },
          "assignee": {
            "type": "object",
            "example": "João Silva",
            "description": "Nome do usuário a quem a issue está atribuída (assignee).",
            "nullable": true
          },
          "reporter": {
            "type": "object",
            "example": "Ana Souza",
            "description": "Nome do usuário que reportou a issue (reporter).",
            "nullable": true
          },
          "priority": {
            "type": "object",
            "example": "High",
            "description": "Prioridade da issue (se definida).",
            "nullable": true
          },
          "timeOpenDays": {
            "type": "number",
            "example": 3,
            "description": "Quantidade de dias que a issue está em aberto"
          }
        },
        "required": [
          "key",
          "summary",
          "status",
          "created",
          "assignee",
          "reporter",
          "priority",
          "timeOpenDays"
        ]
      },
      "ProcessedIssuesResponseDto": {
        "type": "object",
        "properties": {
          "total": {
            "type": "number",
            "example": 5,
            "description": "Total de issues após filtrar os status indesejados."
          },
          "issues": {
            "description": "Lista de issues após processamento e filtro.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IssueSummaryDto"
            }
          },
          "statusCounts": {
            "type": "object",
            "example": {
              "In Progress": 2,
              "To Do": 3
            },
            "description": "Objeto contendo a contagem de issues por status."
          }
        },
        "required": [
          "total",
          "issues",
          "statusCounts"
        ]
      }
    }
  }
}
